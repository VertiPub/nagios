# Pagerduty definitions
#
# Autogenerated by Chef.

# CRITICAL, DOWN and RECOVERY notices will be sent 24x7.
define contact {
       contact_name                             pagerduty-urgent
       alias                                    PagerDuty Pseudo-Contact
       service_notification_period              24x7
       host_notification_period                 24x7
       service_notification_options             c,r
       host_notification_options                d,r
       service_notification_commands            notify-service-by-pagerduty
       host_notification_commands               notify-host-by-pagerduty
       pager                                    <%= node[:nagios][:pagerduty_key] %>
}

# WARNING and UNKNOWN service alerts will only sent notices during "business
# hours."
define contact {
       contact_name                             pagerduty-all
       alias                                    PagerDuty Pseudo-Contact
       service_notification_period              business_hours
       service_notification_options             w,u
       service_notification_commands            notify-service-by-pagerduty
       host_notification_commands               notify-host-by-pagerduty
       pager                                    <%= node[:nagios][:pagerduty_key] %>
}

define command {
       command_name     notify-service-by-pagerduty
       command_line     <%= node['nagios']['plugin_dir'] %>/pagerduty_nagios.pl enqueue -f pd_nagios_object=service
}

define command {
       command_name     notify-host-by-pagerduty
       command_line     <%= node['nagios']['plugin_dir'] %>/pagerduty_nagios.pl enqueue -f pd_nagios_object=host
}
