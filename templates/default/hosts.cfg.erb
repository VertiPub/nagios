# Host definitions
#
# Autogenerated by Chef.

define host {
  use server
  address <%= node['ipaddress'] %>
  host_name <%= node['hostname'] %>
  hostgroups <%= node['nagios']['server_role'] %>
}

<% @nodes.each do |n| -%>
<% unless n["name"] == node["name"] -%>
define host {
  use server
  address <%= n['ipaddress'] %>
  host_name <%= n['hostname'] %>
<% if !n.has_key? 'hostgroups' || n['hostgroups'].length == 0 -%>
  hostgroups all
<% else -%>
  hostgroups <%= n['hostgroups'].join(",") %>
<% end -%>
}
<% end -%>

<% end -%>
